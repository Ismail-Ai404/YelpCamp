<!-- @format -->

<!DOCTYPE html>
<html lang="en">
     <head>
          <meta charset="UTF-8" />
          <title>YelpCamp</title>
          <!-- Bootstrap 5 CDN -->
          <link
               href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
               rel="stylesheet"
          />
          <link
               rel="stylesheet"
               href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
          />
     </head>
     <body class="d-flex flex-column min-vh-100">
          <!-- Navbar -->
          <%- include("../partials/navbar") %>

          <div class="container mt-3">
               <% if (success && success.length) { %>
               <div
                    class="alert alert-success alert-dismissible fade show"
                    role="alert"
               >
                    <%= success %>
                    <button
                         type="button"
                         class="btn-close"
                         data-bs-dismiss="alert"
                         aria-label="Close"
                    ></button>
               </div>
               <% } %> <% if (error && error.length) { %>
               <div
                    class="alert alert-danger alert-dismissible fade show"
                    role="alert"
               >
                    <%= error %>
                    <button
                         type="button"
                         class="btn-close"
                         data-bs-dismiss="alert"
                         aria-label="Close"
                    ></button>
               </div>
               <% } %>
          </div>

          <!-- Main content -->
          <main class="container my-4 flex-grow-1"><%- body %></main>

          <!-- Footer -->
          <%- include("../partials/footer") %>

          <!-- Bootstrap JS -->
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

          <script>
               setTimeout(() => {
                    const alertNode = document.querySelector(".alert");
                    if (alertNode) {
                         alertNode.classList.remove("show");
                         alertNode.classList.add("fade");
                         setTimeout(() => alertNode.remove(), 500);
                    }
               }, 5000);
          </script>

          <script>
               // Example starter JavaScript for disabling form submissions if there are invalid fields
               (function () {
                    "use strict";

                    // Fetch all the forms we want to apply custom Bootstrap validation styles to
                    const forms =
                         document.querySelectorAll(".needs-validation");

                    // Loop over them and prevent submission
                    Array.from(forms).forEach(function (form) {
                         form.addEventListener(
                              "submit",
                              function (event) {
                                   if (!form.checkValidity()) {
                                        event.preventDefault();
                                        event.stopPropagation();
                                   }

                                   form.classList.add("was-validated");
                              },
                              false
                         );
                    });
               })();
          </script>
     </body>
</html>
